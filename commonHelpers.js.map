{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function searchImagesByQuery(sear, page) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '45094022-90f186f65f49c334b8043619f',\n      q: sear,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: '15',\n      page: page,\n    },\n  });\n  return response.data;\n}\n","export default function createImagesMarkup(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n           <a class=\"gallery-link\" href=\"${largeImageURL}\">\n             <img class=\"gallery-image\" src=\"${webformatURL}\"\n             alt=\"${tags}\"\n             width=\"360\"\n             />\n           </a>\n           <div class=\"thumb-block\">\n             <div class=\"block\">\n               <h2 class=\"title\">Likes</h2>\n               <p class=\"amount\">${likes}</p>\n             </div>\n             <div class=\"block\">\n               <h2 class=\"title\">Views</h2>\n               <p class=\"amount\">${views}</p>\n             </div>\n             <div class=\"block\">\n               <h2 class=\"title\">Comments</h2>\n               <p class=\"amount\">${comments}</p>\n             </div>\n             <div class=\"block\">\n               <h2 class=\"title\">Downloads</h2>\n               <p class=\"amount\">${downloads}</p>\n             </div>\n           </div>\n         </li>`\n    )\n    .join('');\n\n  container.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh('show.simplelightbox');\n\n  return;\n}\n\nexport const container = document.querySelector('.gallery');\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nvar lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionsDelay: 250,\n});\n","import searchImagesByQuery from './js/pixabay-api.js';\n\nimport createImagesMarkup from './js/render-functions.js';\nimport { container } from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.btn-load-more');\n\nbtnLoadMore.style.display = 'none';\n\nloader.style.display = 'none';\n\nform.addEventListener('submit', handleSubmit);\nbtnLoadMore.addEventListener('click', handleSubmitLoadMore);\n\nlet sear = null;\nlet page = 1;\nlet totalHits = 0;\n\nasync function handleSubmit(event) {\n  try {\n    event.preventDefault();\n    container.innerHTML = '';\n    page = 1;\n    btnLoadMore.style.display = 'none';\n\n    const search = event.currentTarget.elements;\n    sear = search.text.value.trim().toLowerCase();\n\n    if (sear == 0) {\n      myIziToast('The form field must be filled', '#abd4f8');\n      return;\n    }\n    loader.style.display = 'block';\n\n    await searchImagesByQuery(sear, page)\n      .then(data => {\n        totalHits = data.totalHits;\n        loader.style.display = 'none';\n        if (data.hits.length == 0) {\n          myIziToast(\n            'Sorry, there are no images matching your search query. Please try again!',\n            '#f28111'\n          );\n          return;\n        }\n        createImagesMarkup(data.hits);\n        btnLoadMore.style.display = 'block';\n      })\n      .catch(error => {\n        myIziToast('Oops... Something went wrong.', '#e97782');\n        loader.style.display = 'none';\n      })\n      .finally(() => form.reset());\n  } catch (error) {\n    myIziToast('Oops... Something went wrong.', '#e97782');\n  }\n}\n\nasync function handleSubmitLoadMore(event) {\n  try {\n    event.preventDefault();\n    btnLoadMore.style.display = 'none';\n    page += 1;\n    if (totalHits < page * 15) {\n      loader.style.display = 'none';\n      myIziToast(\n        'We re sorry, but you ve reached the end of search results.',\n        '#f28111'\n      );\n      return;\n    }\n    loader.style.display = 'block';\n\n    await searchImagesByQuery(sear, page)\n      .then(data => {\n        console.log(data);\n        loader.style.display = 'none';\n\n        createImagesMarkup(data.hits);\n        btnLoadMore.style.display = 'block';\n        setScrolling();\n      })\n      .catch(error => {\n        myIziToast('Oops... Something went wrong.', '#e97782');\n        loader.style.display = 'none';\n      });\n  } catch (error) {\n    myIziToast('Oops... Something went wrong.', '#e97782');\n  }\n}\n\nfunction setScrolling() {\n  window.scrollBy({\n    top: gallery.getBoundingClientRect().height * 0.14,\n    behavior: 'smooth',\n  });\n}\n\nfunction myIziToast(message, color) {\n  iziToast.error({\n    title: 'Error',\n    message: `${message}`,\n    position: 'topRight',\n    transitionIn: 'bounceInDown',\n    backgroundColor: `${color}`,\n  });\n}\n"],"names":["searchImagesByQuery","sear","page","axios","createImagesMarkup","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","container","lightbox","SimpleLightbox","form","gallery","loader","btnLoadMore","handleSubmit","handleSubmitLoadMore","totalHits","event","myIziToast","data","error","setScrolling","message","color","iziToast"],"mappings":"owBAEe,eAAeA,EAAoBC,EAAMC,EAAM,CAY5D,OAXiB,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,KACV,KAAMC,CACP,CACL,CAAG,GACe,IAClB,CCfe,SAASE,EAAmBC,EAAQ,CACjD,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,2CACmCL,CAAa;AAAA,+CACTD,CAAY;AAAA,oBACvCE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAOWC,CAAK;AAAA;AAAA;AAAA;AAAA,mCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,mCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,mCAIRC,CAAS;AAAA;AAAA;AAAA,eAIvC,EACA,KAAK,EAAE,EAEVC,EAAU,mBAAmB,YAAaR,CAAM,EAEhDS,EAAS,QAAQ,qBAAqB,CAGxC,CAEO,MAAMD,EAAY,SAAS,cAAc,UAAU,EAK1D,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,SAAU,GACV,aAAc,MACd,cAAe,GACjB,CAAC,ECjDD,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAE3DA,EAAY,MAAM,QAAU,OAE5BD,EAAO,MAAM,QAAU,OAEvBF,EAAK,iBAAiB,SAAUI,CAAY,EAC5CD,EAAY,iBAAiB,QAASE,CAAoB,EAE1D,IAAIrB,EAAO,KACPC,EAAO,EACPqB,EAAY,EAEhB,eAAeF,EAAaG,EAAO,CACjC,GAAI,CASF,GARAA,EAAM,eAAc,EACpBV,EAAU,UAAY,GACtBZ,EAAO,EACPkB,EAAY,MAAM,QAAU,OAG5BnB,EADeuB,EAAM,cAAc,SACrB,KAAK,MAAM,KAAI,EAAG,cAE5BvB,GAAQ,EAAG,CACbwB,EAAW,gCAAiC,SAAS,EACrD,MACD,CACDN,EAAO,MAAM,QAAU,QAEvB,MAAMnB,EAAoBC,EAAMC,CAAI,EACjC,KAAKwB,GAAQ,CAGZ,GAFAH,EAAYG,EAAK,UACjBP,EAAO,MAAM,QAAU,OACnBO,EAAK,KAAK,QAAU,EAAG,CACzBD,EACE,2EACA,SACZ,EACU,MACD,CACDrB,EAAmBsB,EAAK,IAAI,EAC5BN,EAAY,MAAM,QAAU,OACpC,CAAO,EACA,MAAMO,GAAS,CACdF,EAAW,gCAAiC,SAAS,EACrDN,EAAO,MAAM,QAAU,MAC/B,CAAO,EACA,QAAQ,IAAMF,EAAK,MAAK,CAAE,CAC9B,MAAe,CACdQ,EAAW,gCAAiC,SAAS,CACtD,CACH,CAEA,eAAeH,EAAqBE,EAAO,CACzC,GAAI,CAIF,GAHAA,EAAM,eAAc,EACpBJ,EAAY,MAAM,QAAU,OAC5BlB,GAAQ,EACJqB,EAAYrB,EAAO,GAAI,CACzBiB,EAAO,MAAM,QAAU,OACvBM,EACE,6DACA,SACR,EACM,MACD,CACDN,EAAO,MAAM,QAAU,QAEvB,MAAMnB,EAAoBC,EAAMC,CAAI,EACjC,KAAKwB,GAAQ,CACZ,QAAQ,IAAIA,CAAI,EAChBP,EAAO,MAAM,QAAU,OAEvBf,EAAmBsB,EAAK,IAAI,EAC5BN,EAAY,MAAM,QAAU,QAC5BQ,GACR,CAAO,EACA,MAAMD,GAAS,CACdF,EAAW,gCAAiC,SAAS,EACrDN,EAAO,MAAM,QAAU,MAC/B,CAAO,CACJ,MAAe,CACdM,EAAW,gCAAiC,SAAS,CACtD,CACH,CAEA,SAASG,GAAe,CACtB,OAAO,SAAS,CACd,IAAKV,EAAQ,sBAAuB,EAAC,OAAS,IAC9C,SAAU,QACd,CAAG,CACH,CAEA,SAASO,EAAWI,EAASC,EAAO,CAClCC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,GAAGF,CAAO,GACnB,SAAU,WACV,aAAc,eACd,gBAAiB,GAAGC,CAAK,EAC7B,CAAG,CACH"}