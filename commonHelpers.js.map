{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function searchImagesByQuery(sear, page, per_page) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '45094022-90f186f65f49c334b8043619f',\n      q: sear,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: per_page,\n      page: page,\n    },\n  });\n  return response.data;\n}\n","export default function createImagesMarkup(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n           <a class=\"gallery-link\" href=\"${largeImageURL}\">\n             <img class=\"gallery-image\" src=\"${webformatURL}\"\n             alt=\"${tags}\"\n             width=\"360\"\n             />\n           </a>\n           <div class=\"thumb-block\">\n             <div class=\"block\">\n               <h2 class=\"title\">Likes</h2>\n               <p class=\"amount\">${likes}</p>\n             </div>\n             <div class=\"block\">\n               <h2 class=\"title\">Views</h2>\n               <p class=\"amount\">${views}</p>\n             </div>\n             <div class=\"block\">\n               <h2 class=\"title\">Comments</h2>\n               <p class=\"amount\">${comments}</p>\n             </div>\n             <div class=\"block\">\n               <h2 class=\"title\">Downloads</h2>\n               <p class=\"amount\">${downloads}</p>\n             </div>\n           </div>\n         </li>`\n    )\n    .join('');\n\n  container.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh('show.simplelightbox');\n\n  return;\n}\n\nexport const container = document.querySelector('.gallery');\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nvar lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionsDelay: 250,\n});\n","import searchImagesByQuery from './js/pixabay-api.js';\n\nimport createImagesMarkup from './js/render-functions.js';\nimport { container } from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.btn-load-more');\n\nconst scrollUp = document.querySelector('.isShowBtn');\nscrollUp.style.display = 'none';\nscrollUp.addEventListener('click', handleScroll);\nfunction handleScroll() {\n  window.scrollTo(0, 0);\n}\n\nwindow.onscroll = () => {\n  if (window.scrollY > 700) {\n    scrollUp.style.display = 'block';\n  } else {\n    scrollUp.style.display = 'none';\n  }\n};\n\nbtnLoadMore.style.display = 'none';\n\nloader.style.display = 'none';\n\nform.addEventListener('submit', handleSubmit);\n\nconst per_page = 15;\nlet sear = null;\nlet page = 1;\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  container.innerHTML = '';\n  page = 1;\n  btnLoadMore.style.display = 'none';\n\n  const search = event.currentTarget.elements;\n  sear = search.text.value.trim().toLowerCase();\n\n  if (sear == 0) {\n    myIziToast('Warning', 'The form field must be filled', '#abd4f8');\n    return;\n  }\n  loader.style.display = 'block';\n\n  try {\n    const { hits, totalHits } = await searchImagesByQuery(sear, page, per_page);\n\n    loader.style.display = 'none';\n\n    if (hits.length == 0) {\n      myIziToast(\n        'Error',\n        'Sorry, there are no images matching your search query. Please try again!',\n        '#f28111'\n      );\n      return;\n    }\n    createImagesMarkup(hits);\n\n    if (totalHits > per_page) {\n      btnLoadMore.addEventListener('click', handleSubmitLoadMore);\n      btnLoadMore.style.display = 'block';\n    } else {\n      myIziToast(\n        'Info',\n        'We re sorry, but you ve reached the end of search results.',\n        '#f28111'\n      );\n    }\n  } catch (error) {\n    myIziToast('Error', 'Oops... Something went wrong.', '#e97782');\n    loader.style.display = 'none';\n  } finally {\n    form.reset();\n  }\n}\n\nasync function handleSubmitLoadMore(event) {\n  event.preventDefault();\n  btnLoadMore.style.display = 'none';\n  page += 1;\n  loader.style.display = 'block';\n\n  try {\n    const { hits, totalHits } = await searchImagesByQuery(sear, page, per_page);\n\n    loader.style.display = 'none';\n\n    createImagesMarkup(hits);\n\n    const liEl = document.querySelector('.gallery-item');\n    const { height } = liEl.getBoundingClientRect();\n\n    setScrolling(height);\n\n    const totalPage = Math.ceil(totalHits / per_page);\n    if (totalPage == page) {\n      myIziToast(\n        'Info',\n        'We re sorry, but you ve reached the end of search results.',\n        '#f28111'\n      );\n      btnLoadMore.removeEventListener('click', handleSubmitLoadMore);\n      return;\n    } else {\n      btnLoadMore.style.display = 'block';\n    }\n  } catch (error) {\n    myIziToast('Error', 'Oops... Something went wrong.', '#e97782');\n  }\n}\n\nfunction setScrolling(height) {\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction myIziToast(title, message, color) {\n  iziToast.error({\n    title: `${title}`,\n    message: `${message}`,\n    position: 'topRight',\n    transitionIn: 'bounceInDown',\n    backgroundColor: `${color}`,\n  });\n}\n"],"names":["searchImagesByQuery","sear","page","per_page","axios","createImagesMarkup","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","container","lightbox","SimpleLightbox","form","loader","btnLoadMore","scrollUp","handleScroll","handleSubmit","event","myIziToast","hits","totalHits","handleSubmitLoadMore","liEl","height","setScrolling","title","message","color","iziToast"],"mappings":"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"}